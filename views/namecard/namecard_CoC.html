<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRPG COC角色卡</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --gradient-start: #60a5fa;
            --gradient-end: #f472b6;
            --message-bg: linear-gradient(to right, #d7ffec, #cae1ff);
            --status-bg: linear-gradient(to right, #cae1ff, #d7ffec);
            --container-bg: linear-gradient(to right, #b5e1fe, #f3f7ff);
            --card-bg: linear-gradient(to right, #ffffff, #ffffff);
            --text-color: #1e40af;
            --attribute-color: #4a5568;
            --subtext-color: #6b7280;
            --border-radius: 0.5rem;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(to bottom, #516ea7, #d6e4ff);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .container {
            max-width: 1024px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            background: var(--container-bg);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .column {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .column:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: #b83b6f;
            margin-bottom: 1rem;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            text-decoration: underline;
            /* Add underline */
        }

        h3 {
            color: #4c51bf;
            margin-bottom: 1rem;
            text-align: center;
        }

        .avatar-container {
            width: 12rem;
            height: 12rem;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .avatar-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border: 5px solid #ffffff;
            /* Add border */
        }

        .stats-chart {
            margin-top: 1.5rem;
        }

        .message {
            background: var(--message-bg);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-top: 1.5rem;
            box-shadow: var(--box-shadow);
        }

        .player-info {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .player-info span {
            color: var(--subtext-color);
        }

        .status-bars {
            margin-top: 1.5rem;
            background: var(--status-bg);
            padding: 1rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .status-item {
            display: flex;
            align-items: center;
            margin: 1rem 0;
            font-weight: bold;
            color: var(--text-color);
        }

        .progress-bar {
            flex: 1;
            height: 0.5rem;
            background: #e5e7eb;
            border-radius: 9999px;
            margin: 0 1rem;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            border-radius: 9999px;
        }

        .attribute-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between !important;
            margin-bottom: 0.1rem;
        }

        .attribute {
            flex: 0 1 30%;
            margin-bottom: 0.5rem;
            white-space: nowrap;
            font-weight: bold;
            color: var(--attribute-color);
        }

        .flex-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .flex-item {
            flex: 1 1 30%;
            margin: 0.5rem;
            text-align: center;
        }

        .divider {
            height: 1px;
            background: #e5e7eb;
            margin: 1rem 0;
        }

        .icon {
            margin-right: 0.5rem;
            color: var(--text-color);
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="grid">
            <div class="column">
                <div class="player-info">
                    <h2 id="characterName">角色名字</h2>
                    <div class="info flex-container">
                        <span class="flex-item" id="playerName">玩家名字</span>
                        <span class="flex-item" id="characterID">角色ID</span>
                    </div>
                </div>
                <div class="avatar-container">
                    <img id="avatarImage" src="https://d1vzi28wh99zvq.cloudfront.net/images/21286/483040.jpg"
                        alt="角色頭像">
                </div>
                <h3 id="attributeTitle">基本屬性</h3>
                <div id="basic-attributes"></div>
            </div>

            <div class="column">
                <h3 id="skillsTitle">技能類型</h3>
                <canvas id="skillsChart"></canvas>

                <div class="status-bars">
                    <h3>性格與偏好</h3>
                    <div class="status-item">
                        <i class="fas fa-check icon"></i>
                        <span>事前準備</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 70%"></div>
                        </div>
                        <span>隨機應變</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-star icon"></i>
                        <span>單一專業</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 60%"></div>
                        </div>
                        <span>多項才藝</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-users icon"></i>
                        <span>邊緣人</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 85%"></div>
                        </div>
                        <span>社牛</span>
                    </div>
                </div>
            </div>

            <div class="column">
                <h3 id="diceTitle">擲骰</h3>
                <div id="dice-rolls"></div>
                <div class="divider"></div>
                <div class="message">
                    <h3 id="notesTitle">筆記</h3>
                    <div id="notes"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const icons = [
            'fas fa-check',
            'fas fa-star',
            'fas fa-heart',
            'fas fa-smile',
            'fas fa-thumbs-up',
            'fas fa-lightbulb',
            'fas fa-user-friends',
            'fas fa-flag',
            'fas fa-clipboard-list',
            'fas fa-comment-dots'
        ];
        const avatarImageUrl = "https://images2.imgbox.com/df/86/GVcHJFVv_o.png";

        const character = {
            characterName: "傑克·史密斯",
            playerName: "D&D",
            id: "@DD",
            attributes: {
                attributesList: {
                    HP: "15 / 15",
                    MP: "0 / 0",
                    san: "60 / 60 ",
                    幸運: 80,
                    力量: 0,
                    敏捷: 0,
                    意志: 1,
                    體質: 0,
                    外貌: 0,
                    教育: 0,
                    體型: 0,
                    智力: 0,
                    靈感: 0,
                    體格: -2,
                    DB: -2,
                    MOV: 8
                }
            },
            skills: [
                { type: '交際', value: 50 },
                { type: '學問', value: 80 },
                { type: '職業', value: 40 },
                { type: '調查+隱密', value: 60 },
                { type: '戰鬥', value: 100 },
                { type: '醫療', value: 20 }
            ],
            diceRolls: {
                心理學: "50",
                信譽: "30",
                偵查: "25",
                鬥毆: "15"
            },
            notes: {
                title: "筆記",
                items: [
                    { label: "現金", value: "1,000日元" },
                    { label: "隨身物品", value: "筆記：這是測試,請試試在群組輸入 .char use Sad" },
                    { label: "心靈支柱", value: "無" },
                    { label: "資產", value: "物品：" }
                ]
            },
            diceTitle: "擲骰", // 新增擲骰標題
            skillsTitle: "技能類型", // 新增技能類型標題
            attributeTitle: "基本屬性",
            personalityPreferencesTitle: '性格與偏好',
            personalityPreferences: {
                items: [
                    { label: '事前準備', value: 80, alternative: '隨機應變', icon: icons[0] },
                    { label: '單一專業', value: 60, alternative: '多項才藝', icon: icons[1] },
                    { label: '邊緣人', value: 85, alternative: '社牛', icon: icons[2] }
                ]
            }

        };

        document.getElementById('playerName').innerText = character.playerName;
        document.getElementById('characterName').innerText = character.characterName;
        document.getElementById('characterID').innerText = character.id;
        document.getElementById('avatarImage').src = avatarImageUrl;

        // 更新技能類型標題
        document.getElementById('skillsTitle').innerText = character.skillsTitle;

        // 更新基本屬性標題
        document.getElementById('attributeTitle').innerText = character.attributeTitle;
        // 更新擲骰標題
        document.getElementById('diceTitle').innerText = character.diceTitle;

        // 更新筆記標題
        document.getElementById('notesTitle').innerText = character.notes.title;

        // 生成筆記的 HTML
        const notesHTML = character.notes.items.map(item => {
            return `<p>${item.label}：<span style="color: var(--text-color);">${item.value}</span></p>`;
        }).join('');
        document.getElementById('notes').innerHTML = notesHTML;



        // 生成性格與偏好的 HTML
        const statusItemsHTML = character.personalityPreferences.items.map(item => {
            return `
                <div class="status-item">
                    <i class="${item.icon} icon"></i>
                    <span>${item.label}</span>
                    <div class="progress-bar">
                        <div class="progress" style="width: ${item.value}%"></div>
                    </div>
                    <span>${item.alternative}</span>
                </div>
            `;
        }).join('');

        // 替換原有的性格與偏好內容
        document.querySelector('.status-bars').innerHTML = `
            <h3>${character.personalityPreferencesTitle}</h3>
            ${statusItemsHTML}
        `;

        const attributes = character.attributes;
        const attributesHTML = `
            <div class="attribute-group">
                ${Object.entries(attributes.attributesList).map(([key, value]) => {
            return `<span class="attribute">${key}：<span style="color: var(--text-color);">${value}</span></span>`;
        }).join('')}
            </div>
        `;
        document.getElementById('basic-attributes').innerHTML = attributesHTML;

        const diceRollsHTML = `
            <div class="attribute-group" style="flex= 0 0 30%;">
                ${Object.entries(character.diceRolls).map(([key, value]) => {
            return `<span class="attribute">${key}：<span style="color: var(--text-color);">${value}</span></span>`;
        }).join('')}
            </div>
        `;
        document.getElementById('dice-rolls').innerHTML = diceRollsHTML;

        const ctx = document.getElementById('skillsChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: character.skills.map(skill => skill.type),
                datasets: [{
                    data: character.skills.map(skill => skill.value),
                    backgroundColor: 'rgba(255, 105, 180, 0.3)',
                    borderColor: 'rgba(255, 105, 180, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(255, 105, 180, 1)'
                }]
            },
            options: {
                scales: {
                    r: {
                        angleLines: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        pointLabels: {
                            color: '#4a5568',
                            font: {
                                size: 12
                            }
                        },
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        // Centering logic for player name and character ID
        const playerNameEl = document.getElementById('playerName');
        const characterIDEl = document.getElementById('characterID');

        if (!character.playerName) {
            playerNameEl.style.display = 'none';
            characterIDEl.style.textAlign = 'center';
            characterIDEl.style.width = '100%'; // Force full width
        } else if (!character.id) {
            characterIDEl.style.display = 'none';
            playerNameEl.style.textAlign = 'center';
            playerNameEl.style.width = '100%'; // Force full width
        }
    </script>
</body>

</html>