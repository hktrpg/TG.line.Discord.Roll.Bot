<!doctype html>
<html lang="zh-Hant-HK">
<!-- HKTRPG Sad-->
<style>
    .center {
        text-align: center;
    }

    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    td,
    th {
        border: 1px solid #dddddd;
        padding: 4px;
    }

    th {
        background-color: #eeeeee;
    }

    input[type=text],
    select {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        margin-top: 25px;
    }

    .bg-color {
        background-color: #EDEAE5;
        color: black;
    }

    .color-01 {
        background-color: #f0d25d80;
        color: black;
    }

    .color-02 {
        background-color: #90ccf4c7;
        color: white;
    }



    .preline {
        white-space:
            pre-line;
    }

    body {
        margin-top: 2%
    }

    .overlay {
        height: 100%;
        width: 100%;
        display: none;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: rgb(0, 0, 0);
        background-color: rgba(247, 248, 177, 0.5);
    }

    .overlay-content {
        position: relative;
        top: 25%;
        width: 100%;
        text-align: center;
        margin-top: 30px;
    }

    .overlay a {
        padding: 8px;
        text-decoration: none;
        font-size: 36px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }

    .overlay a:hover,
    .overlay a:focus {
        color: #f1f1f1;
    }

    .overlay .closebtn {
        position: absolute;
        top: 20px;
        right: 45px;
        font-size: 60px;
    }

    @media screen and (max-height: 450px) {
        .overlay a {
            font-size: 20px
        }

        .overlay .closebtn {
            font-size: 40px;
            top: 15px;
            right: 35px;
        }
    }
</style>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- production version, optimized for size and speed -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"
        integrity="sha512-HjKxWye8lJGPu5q1u/ZYkHlJrJdm6KGr89E6tOrXeKm1mItb1xusPU8QPcKVhP8F9LjpZT7vsu1Fa+dQywP4eg=="
        crossorigin="anonymous"></script>
    <script src="https://pulipulichen.github.io/jieba-js/jquery.js"></script>
    <script src="https://pulipulichen.github.io/jieba-js/require-jieba-js.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <title>Discord Messager @ HKTRPG</title>
    <link rel="icon" href="https://avatars2.githubusercontent.com/u/48795428?s=280&v=4" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.4.4/mobile-detect.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"
        integrity="sha512-nOQuvD9nKirvxDdvQ9OMqe2dgapbPB7vYAMrzJihw5m+aNcf0dX53m6YxM4LgA9u8e9eg9QX+/+mPu8kCNpV2A=="
        crossorigin="anonymous"></script>
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>

    <!--https://blog.gtwang.org/programming/javascript-aes-symmetric-encryption-tutorial/-->
</head>

<body class="bg-color center" id="body">
    <nav class="navbar navbar-expand-lg navbar-light bg-light container">
        <a class="navbar-brand" href="https://www.hktrpg.com/wiki/index.php/%E9%A6%96%E9%A0%81"><a
                class="badge badge-pill badge-danger">
                HKTRPG Discord èŠå¤©ç´€éŒ„åˆ†æ<span class="iconify" data-icon="mdi:dice-multiple-outline" data-inline="false"
                    style="color: black;" data-width="32" data-height="32"></span></span>
                <span class="iconify" data-icon="bi:chat-square-text" data-inline="false" style="color: black;"
                    data-width="32" data-height="32"></span>
            </a></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-item nav-link active"
                    href="https://www.hktrpg.com/wiki/index.php/%E9%A6%96%E9%A0%81">ä¸»é </a>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        è§’è‰²å¡
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://www.hktrpg.com:20721/card/">ç§äººè§’è‰²å¡</a>
                        <a class="dropdown-item" href="https://www.hktrpg.com:20721/publiccard/">å…¬é–‹è§’è‰²å¡</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        è·‘åœ˜å¹³å°
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://z01.hktrpg.com/">2.5D - çƒå†¬</a>
                        <a class="dropdown-item" href="https://z02.hktrpg.com/">å››å¹³å…«ç©© - å†°ä¸¼</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        æ“²éª°
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://rollbot.hktrpg.com/">èŠå¤©å®¤æ“²éª°</a>
                        <a class="dropdown-item" href="https://roll.hktrpg.com/">æ‰‹æ©Ÿç°¡æ˜“æ“²éª°</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="https://discord.hktrpg.com">Discord éª°å­æ©Ÿæ¢°äºº</a>
                        <a class="dropdown-item" href="http://t.me/hktrpg_bot">Telegram éª°å­æ©Ÿæ¢°äºº</a>
                        <a class="dropdown-item" href="http://bit.ly/HKTRPG_LINE">Line éª°å­æ©Ÿæ¢°äºº</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link"
                        href="https://hktrpg.github.io/TG.line.Discord.Roll.Bot/PORTFOLIOP">HKTRPGä½œå“é›†</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.patreon.com/HKTRPG">è¨‚é–±</a>
                </li>
                <a class="nav-item nav-link " href="https://github.com/hktrpg/TG.line.Discord.Roll.Bot">
                    <span class="iconify" data-icon="bytesize:github" data-inline="false" data-width="25px"
                        data-height="25px"></span></a>
                <a class="nav-item nav-link " href="https://support.hktrpg.com">
                    <span class="iconify" data-icon="jam:discord" data-inline="false" data-width="25px"
                        data-height="25px"></span></a>
            </div>
        </div>
    </nav>
    <div id="myNav" class="overlay">
        <div class="overlay-content">
            <div class="spinner-border" style="width: 10rem; height: 10rem; color:chocolate;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>

    <div> <br>
        <h1>èŠå¤©ç´€éŒ„</h1>
        <div class="container-md">
            <div class="row border">
                <div class="col-md-4 color-01"> <br>
                    <div id="totallyDate">
                        <br>
                        ç¸½å…±èŠå¤©å¤©æ•¸ <br>
                        <span class="iconify" data-icon="ic:outline-calendar-today" data-inline="false"
                            data-width="30px" data-height="30px"></span>{{ message }}<br><br>
                    </div>
                    <div id="totallyMessage"><br>
                        ç¸½å…±å‚³äº†å¤šå°‘è¨Šæ¯<br>
                        <span class="iconify" data-icon="bi:people" data-inline="false" data-width="30px"
                            data-height="30px"></span>{{ message0 }}<br>
                        <span class="iconify" data-icon="ant-design:robot-outlined" data-inline="false"
                            data-width="30px" data-height="30px"></span>
                        {{ message1 }}<br>
                    </div><br>
                </div>
                <div class="col-md-4 color-02">
                    <canvas id="myChart" width="100" height="80"></canvas>
                </div>
                <div class="col-md-4 color-01"> <br>
                    <div id="averageMessage"><br>
                        æ¯æ—¥å¹³å‡è¨Šæ¯æ•¸é‡<br><span class="iconify" data-icon="grommet-icons:mail-option" data-inline="false"
                            data-width="30px" data-height="30px"></span>
                        {{ message }}<br>
                    </div>
                    <br>
                    <div id="analysicDate"><br>
                        æœ€å¤šè¨Šæ¯çš„ä¸‰å¤©<br>
                        <div v-for="message in messages">
                            <span class="iconify" data-icon="clarity:talk-bubbles-line" data-inline="false"
                                data-width="30px" data-height="30px"></span>{{ message.date }} {{ message.number }}æ¢
                        </div><br>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-4 color-02 border">
                    <canvas id="myChart2" width="100" height="80"></canvas>
                </div>
                <div class="col-md-4 color-01 border" id="wordCloud">æœ€å¸¸è¬›çš„å­— (æ–‡å­—é›²)
                    <div id="tag" style=" height: 250px; width:350px;"></div>
                </div>
                <div class="col-md-4 color-02 border">
                    <canvas id="myChart3" width="100" height="80"></canvas>
                </div>
            </div>

        </div>
        <br>

        <div class="container center table-responsive-md" id="appMain">
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                ä½¿ç”¨èªªæ˜
            </button>
            <button class="btn btn-info" v-on:click="loadDemo">è¼‰å…¥ç¯„ä¾‹</button>

            <br><br>
            <div class="form-row">
                <div class="form-group col-md-3 mx-auto">
                    <div class="input-group mb-3">
                        <input type="password" class="form-control" aria-describedby="passwordHelpBlock"
                            placeholder="è«‹è¼¸å…¥å¯†ç¢¼" id="passw0rd">
                        <button class="btn btn-warning" v-on:click="reNew">é–‹å§‹è§£å¯†</button>
                    </div>
                </div>
            </div>
            <br>
            <div class="page-header" style="color: #90CCF4;">
                <input type="text" placeholder="Filter" v-model="filter" />
            </div>
            <table class="table table-bordered" style="word-break:break-all; word-wrap:break-all;">
                <thead class="thead ">
                    <tr class="d-flex">
                        <th class="col-md-1" style="color: white;background-color: #90ccf4e0;">#</th>
                        <th class="col-md-2" style="color: white;background-color: #90ccf4e0;">æ™‚é–“</th>
                        <th class="col-md-2" style="color: white;background-color:  #90ccf4e0;">ç™¼ä¿¡äºº(ğŸ¤–)</th>
                        <th class="col-md-7" style="color: white;background-color:  #90ccf4e0;">å…§å®¹</th>
                    </tr>
                </thead>
                <tbody class="preline" v-for="(row, index) in filteredRows">
                    <tr v-if="index%2==0" class="d-flex" style="background-color: #90ccf43f">
                        <td class="col-md-1" v-html="index"></td>
                        <td class="col-md-2" v-html="dhm2(row.timestamp)"></td>
                        <td class="col-md-2" v-html="highlightMatches(row.userName,row.isbot)"></td>
                        <td class="col-md-7" v-html="highlightMatches(row.contact)"></td>
                    </tr>
                    <tr v-if="index%2==1" class="d-flex" style="background-color: #f3d25052;">
                        <td class="col-md-1" v-html="index"></td>
                        <td class="col-md-2" v-html="dhm2(row.timestamp)"></td>
                        <td class="col-md-2" v-html="highlightMatches(row.userName,row.isbot)">
                        </td>
                        <td class="col-md-7" v-html="highlightMatches(row.contact)"></td>
                    </tr>
                </tbody>
            </table>



        </div>
        <br> <br>
        <div class="footer-copyright text-center py-3">Â©2020-2021 GNU HKTRPG -
            <a href="https://www.patreon.com/HKTRPG"> é¤µé£¼ Sad</a>
        </div>
        <br> <br>
        <div class="container-md fixed-bottom">
            <div class="progress" id="touchBar" style="height: 30px; background: #ccc;">
                <div class="progress-bar" id="progressbar" role="progressbar" style="width: 10%" aria-valuenow="25"
                    aria-valuemin="0" aria-valuemax="100">25%</div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">ä½¿ç”¨èªªæ˜</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    é€™æ˜¯HKTRPG Discord éª°å­æ©Ÿæ¢°äººçš„é™„å±¬åŠŸèƒ½ï¼Œ<br>
                    ç”¨ä¾†åˆ†æDiscord é »é“çš„èŠå¤©ç´€éŒ„ã€‚<br><br>
                    ä½¿ç”¨æ–¹æ³•ï¼š<br>
                    é¦–å…ˆæŠŠHKTRPGéª°å­æ©Ÿæ¢°äººæ–°å¢åˆ°è‡ªå·±çš„é »é“ï¼Œçµ¦å®ƒé–±è®€éå¾€èŠå¤©æ­·å²çš„æ¬Šé™ï¼Œ<br>
                    ç„¶å¾Œåœ¨æƒ³åˆ†æçš„é »é“ä¸­è¼¸å…¥<br>
                    .discord html æˆ–.discord txt<br>
                    é‚£å®ƒå°±æœƒç§è¨Šä½ è¼¸å‡ºåˆ†æï¼Œå‰è€…ç‚ºç¶²é ç‰ˆå…§å®¹ç¶“éAESåŠ å¯†ï¼Œå¾Œè€…æ˜¯ç´”æ–‡å­—æª”æ¡ˆ<br>
                    ä½†å› ç‚ºç¶“éserverè™•ç†ï¼Œæ“”å¿ƒå€‹è³‡å¤–æ´©è«‹å‹¿ä½¿ç”¨ã€‚<br>
                    <a href="https://discord.hktrpg.com"> \HKTRPGéª°å­æ©Ÿæ¢°äºº/</a><br>
                    P.S. é€™æ˜¯ç‚ºäº†å¯«TRPGåœ˜éŒ„åŠŸèƒ½è€Œé–‹ç™¼å‡ºä¾†çš„å‰¯ç”¢å“ï¼Œæœ‰æ™‚é–“å¯ä»¥åˆ°YTæœç´¢TRPGï¼Œ<br>
                    æœƒæœ‰å¾ˆå¤šæœ‰è¶£çš„REPLAYã€‚
                    <img class="img-fluid" src="https://i.imgur.com/zuLQzmB.jpg">
                    <img class="img-fluid" src="https://i.imgur.com/JM7UdU5.jpg">
                    <img class="img-fluid" src="https://i.imgur.com/UZmOxOT.jpg">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">é—œé–‰</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"
        integrity="sha512-QEiC894KVkN9Tsoi6+mKf8HaCLJvyA6QIRzY5KrfINXYuP9NxdIkRQhGq3BZi0J4I7V5SidGM3XUQ5wFiMDuWg=="
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css"
        integrity="sha512-SUJFImtiT87gVCOXl3aGC00zfDl6ggYAw5+oheJvRJ8KBXZrr/TMISSdVJ5bBarbQDRC2pR5Kto3xTR0kpZInA=="
        crossorigin="anonymous" />
    <script>
        //https://getbootstrap.com/docs/4.5/components/scrollspy/#list-item-4
        // Object.keys(list);
        /**
         * 1. 
         * ç¸½å…±èŠå¤©å¤©æ•¸ - ç”±ä»€éº¼æ™‚å€™é–‹å§‹
         * ç¸½å…±å‚³äº†å¤šå°‘è¨Šæ¯ - BOT åŠéBOT
         * 
         * 2.
         * ç¾¤å‹çš„é ­å…­åçš„è¨Šæ¯æ•¸(ä¸åŒ…æ‹¬BOT) (æ£’å‹åœ–)
         * 
         * 3.
         * æ¯æ—¥å¹³å‡è¨Šæ¯æ•¸é‡
         * æœ€å¤šèªªè©±çš„ä¸€å¤©
         * 
         * 4.ç¾¤å‹å„è‡ªå èŠå¤©çš„æ¯”ä¾‹ (åœ“å‹åœ–)  
         * 
         * 5. 
         * æœ€å¸¸è¬›çš„å­— (æ–‡å­—é›²) 
         * 
         * 6. æ¯æ—¥è¨Šæ¯æ•¸(æ‹†ç·šåœ–)
         * 
         */
        /* var rawData = [{
                    timestamp: 2441246400,
                    contact: 'Test45',
                    userName: 'Test45',
                    isbot: false,
                }]*/
        var aesData = [];

        function getDAesString(encrypted, key, iv) { //è§£å¯†
            var keyy = CryptoJS.enc.Utf8.parse(key);
            var ivv = CryptoJS.enc.Utf8.parse(iv.slice(0, 16));
            var decrypted = CryptoJS.AES.decrypt(encrypted, keyy, {
                iv: ivv,
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            });
            return decrypted.toString(CryptoJS.enc.Utf8);
        }

        function getDAes(key, iv, data) { //è§£å¯†
            var decryptedStr = getDAesString(data, key, iv);
            return decryptedStr;
        }

        var demoData = [{
            timestamp: 340875548000,
            contact: 'Demo ä¿¡æ¯ @HKTRPG',
            userName: 'Sad',
            isbot: false,
        }, {
            timestamp: 584262427000,
            contact: 'ä¸‹å›é å‘Š ã€Œå¿è€…çš„æ­·å² å°±æ˜¯æˆé•·çš„æ­·å² æˆé•·çš„æ­·å² å°±æ˜¯ ç§ç«‹å¾¡é½‹å­¸åœ’çš„æ­·å²',
            userName: 'Zzzzz',
            isbot: true,
        }, {
            timestamp: 868259227000,
            contact: 'æœ¬æ ¡é•·åœ¨æ­¤å®£ä½ˆ ä¸€å¹´ä¸€åº¦ å¤©ä¸‹ä¸€ è©±åŠ‡å¤§æœƒ æ­£å¼é–‹å§‹ å„ç­åŒå­¸è«‹åŠªåŠ›ä»£è¡¨è‡ªå·±çš„ç­è¡¨æ¼”ã€',
            userName: 'Zzzzz',
            isbot: true,
        }, {
            timestamp: 1567584546000,
            contact: 'ã€Œå ±å‘Šæ ¡é•· æˆ‘åœ°æ¥åˆ°éŒ¯èª¤é€šçŸ¥ æœ‰å•²äººæ¥åˆ°å…©ä»½é€šçŸ¥ åˆ°åº•æˆ‘åœ°ç­è¦åšå°ç´…å¸½å®šç™½é›ªå…¬ä¸»ã€ ã€Œã€‚ã€‚ã€‚ã€‚ä¸€æ–¼æºåŸ‹åšç™½é›ªå¸½å•¦ï¼Œçµå±€è‡ªå®šï¼ã€',
            userName: 'Zzzzz',
            isbot: false,
        }, {
            timestamp: 1563696546000,
            contact: 'å¿è€…åœ¨å…¶ä»–äººçœ¼ä¸­æ˜¯å¦‚ç¥ä¸€èˆ¬çš„å­˜åœ¨ï¼Œä½†æœ‰ç”Ÿå‘½çš„çµ‚å°‡æ»…äº¡ï¼Œæ„›å»æ˜¯æ°¸æ†ä¸æ»…ï¼Œ',
            userName: 'Zzzzz',
            isbot: false,
        }, {
            timestamp: 1563696548900,
            contact: 'å‰å¤§çš„å­˜åœ¨æŠŠæ­»å»çš„å¿è€…é›†åˆèµ·ä¾†è¨±è«¾ç›¸æ„›çš„äººï¼Œå°‡æœƒå¾é»ƒæ³‰å¾©æ´»',
            userName: 'Zzzzz',
            isbot: false,
        }, {
            timestamp: 1567238949000,
            contact: 'å¿è€…çš„æ­·å² å°±æ˜¯æˆ°çˆ­çš„æ­·å² äº¦æ˜¯å¿ç¥çš„æ­·å² å¿ç¥ ä»£è¡¨ç„¡é™çš„å¯èƒ½æ€§ å°‘å¹´å¿è€… èˆ‡ ä¸‹ä»»å®—ä¸»å° ä¼™ä¼´æ—…éŠæ™‚è¢«å›°æ–¼éœ§ä¹‹æ‘ä¸­ åªæœ‰ ä¸‰å¤©å¾Œ æ¿ƒéœ§æ¶ˆé™¤ æ‰å¯é›¢é–‹ ç™¾ç„¡èŠè³´ çš„ ä»–å€‘ é‡ä¸Šæ‘ä¸­çš„ å°å¿è€… ,è¢«è«‹æ±‚ æ–¼é‚£æ™‚ å¸¶ å¥¹ é›¢ é–‹ å¯æ˜¯ é€™è¨ˆåŠƒå·²è¢« æ‘ä¸­å®ˆè¡› æ‰€ ç™¼ç¾ ã€‚',
            userName: 'Zetetic',
            isbot: false,
        }, {
            timestamp: 3401941148000,
            contact: '\\æˆ‘æ„›TRPG/ .....å“?',
            userName: 'Zetetic',
            isbot: false,
        }]
        var rawData = [];


        //ç¸½å…±èŠå¤©å¤©æ•¸ - ç”±ä»€éº¼æ™‚å€™é–‹å§‹
        var totallydate = totallyDay(rawData) || "";
        var totallyDate = new Vue({
            el: '#totallyDate',
            data: {
                message: totallydate
            },
            methods: {
                reNewtotallyDate: function (input) {
                    var newtotallydate2 = totallyDay(input);
                    this.message = newtotallydate2;
                }
            },
            updated() {
                // è®“æˆ‘å€‘å¯ä»¥çŸ¥é“çµ„ä»¶æœ‰è¢«æ›´æ–°
                console.log('totallyDate updated')
            }
        })
        var md = new MobileDetect(window.navigator.userAgent);
        var isMobile = true;
        if (!md.mobile() && !md.phone() && !md.tablet()) {
            isMobile = false;
        }

        var switchLoading = (isMobile) ? false : true;
        if (switchLoading) {
            document.getElementById("myNav").style.display = "block";
        } else {
            document.getElementById("wordCloud").style.display = "none";
        }
        //[d, 'å¤©', pad(h), 'å°æ™‚', pad(m), 'åˆ†é˜'].join('');

        call_jieba_cut('', function (_result) {
            document.getElementById("myNav").style.display = "none";
        });

        function loadDemo() {
            demoData.sort(function (a, b) {
                return a.timestamp - b.timestamp;
            });
            if (isMobile == false) {
                drawWordCloud(demoData);
            }

            totallyMessage.reNewTotallyMessage(demoData);
            averageMessage.reNewAaverageMessage(demoData);
            totallyDate.reNewtotallyDate(demoData);
            analysicDateVue.reNewanalysicDate(demoData);
            appMain.reNewappMain(demoData);
            drawTop6DataChart(demoData);
            drawAlluserChart(demoData);
            analysicdate = analysicDate(demoData)
            analysicdate.sort(function (b, a) {
                return a.number - b.number;
            });
            allDateforChart3 = JSON.parse(JSON.stringify(analysicdate));
            drawallDateforChart3();
        }

        function reNew() {
            var key = document.getElementById("passw0rd").value;
            if (key.length < 4) return;
            while (key.length < 32) {
                key += key;
                if (key.length > 32) {
                    key = key.slice(0, 32)
                }
            }
            var newAesData = JSON.parse(getDAes(key, key, aesData));
            if (!Array.isArray(newAesData)) return;
            newAesData.sort(function (a, b) {
                return a.timestamp - b.timestamp;
            });
            if (isMobile == false) {
                drawWordCloud(newAesData);
            }
            totallyMessage.reNewTotallyMessage(newAesData);
            averageMessage.reNewAaverageMessage(newAesData);
            totallyDate.reNewtotallyDate(newAesData);
            analysicDateVue.reNewanalysicDate(newAesData);
            appMain.reNewappMain(newAesData);
            drawTop6DataChart(newAesData);
            drawAlluserChart(newAesData);
            analysicdate = analysicDate(newAesData)
            analysicdate.sort(function (b, a) {
                return a.number - b.number;
            });
            allDateforChart3 = JSON.parse(JSON.stringify(analysicdate));
            drawallDateforChart3();
        }

        //ç¸½å…±å‚³äº†å¤šå°‘è¨Šæ¯ - BOT åŠéBOT
        var totallymessage = analysicTotallymessage(rawData);
        var totallyMessage = new Vue({
            el: '#totallyMessage',
            data: {
                message0: totallymessage[0],
                message1: totallymessage[1]
            },
            methods: {
                reNewTotallyMessage: function (input) {
                    var newTotallymessage = analysicTotallymessage(input);
                    this.message0 = newTotallymessage[0];
                    this.message1 = newTotallymessage[1];
                }
            },
            updated() {
                // è®“æˆ‘å€‘å¯ä»¥çŸ¥é“çµ„ä»¶æœ‰è¢«æ›´æ–°
                console.log('totallyMessage updated')
            }
        })
        var newTotallyDay = ((totallydate).toString().match(/\d+/i) < 1) ? 1 : (totallydate).toString()
            .match(/\d+/i);
        var averageMessage = new Vue({
            el: '#averageMessage',
            data: {
                message: (Math.ceil(totallymessage[0] / newTotallyDay * 100) / 100).toFixed(2) + 'å€‹'
            },
            methods: {
                reNewAaverageMessage: function (input) {
                    newTotallyDay = Number(totallyDay(input).toString().match(/\d+/i)[0]);
                    if (newTotallyDay < 1) newTotallyDay = 1;
                    totallymessage = analysicTotallymessage(input);
                    this.message = (Math.ceil(totallymessage[0] / newTotallyDay * 100) / 100).toFixed(2) +
                        'å€‹';
                }
            },
            updated() {
                // è®“æˆ‘å€‘å¯ä»¥çŸ¥é“çµ„ä»¶æœ‰è¢«æ›´æ–°
                console.log('totallyMessage updated')
            }
        })
        //[humanTimes.length, botTimes.length



        //æœ€å¤šè¨Šæ¯æ•¸æ—¥å­é ­ä¸‰ï¼Œè¨Šæ¯æ•¸ O   
        var analysicdate = analysicDate(rawData)
        var allDateforChart3 = JSON.parse(JSON.stringify(analysicdate));
        analysicdate.sort(function (b, a) {
            return a.number - b.number;
        });

        var top3Date = JSON.parse(JSON.stringify(analysicdate));

        top3Date.splice(3, top3Date.length - 1);
        top3Date.forEach((e, i) => {
            var temptop3Date = e.date.toString().match(/^(\d\d\d\d)(\d\d)(\d\d)/)
            top3Date[i].date = [temptop3Date[1], 'å¹´', temptop3Date[2], 'æœˆ', temptop3Date[3], 'æ—¥'].join('');
        })
        var analysicDateVue = new Vue({
            el: '#analysicDate',
            data: {
                messages: top3Date
            },
            methods: {
                reNewanalysicDate: function (input) {
                    analysicdate = analysicDate(input)
                    allDateforChart3 = JSON.parse(JSON.stringify(analysicdate));
                    analysicdate.sort(function (b, a) {
                        return a.number - b.number;
                    });
                    top3Date = JSON.parse(JSON.stringify(analysicdate));
                    top3Date.splice(3, top3Date.length - 1);
                    top3Date.forEach((e, i) => {
                        temptop3Date = e.date.toString().match(/^(\d\d\d\d)(\d\d)(\d\d)/)
                        top3Date[i].date = [temptop3Date[1], 'å¹´', temptop3Date[2], 'æœˆ',
                            temptop3Date[3], 'æ—¥'
                        ].join('');
                    })
                    this.messages = top3Date
                }
            },
            updated() {
                // è®“æˆ‘å€‘å¯ä»¥çŸ¥é“çµ„ä»¶æœ‰è¢«æ›´æ–°
                console.log('analysicDate updated')
            }
        })
        // ç¾¤å‹çš„é ­å…­åçš„è¨Šæ¯æ•¸(ä¸åŒ…æ‹¬BOT) (æ£’å‹åœ–)




        //ç¾¤å‹å„è‡ªå èŠå¤©çš„æ¯”ä¾‹   


        //æ¯æ—¥å¹³å‡è¨Šæ¯æ•¸é‡
        //totallymessage/totallydate

        //æœ€å¤šèªªè©±çš„ä¸€å¤© 

        //æœ€å¸¸è¬›çš„å­— æ–‡å­—é›²(æ’åº) 

        /**
         *    contact: 'Third: Learn JavaScript\nWWW',
                        timestamp: '2009-09-09',
                        user: 'Sad',
                        ISBOT?: "Dec.",
                        
         * 
         * */



        //æœ€å¤šè¨Šæ¯æ•¸æ—¥å­é ­ä¸‰ï¼Œ è¨Šæ¯æ•¸ O
        function analysicDate(result) {
            var reNewResult = result.filter(message => {
                return message.isbot == false
            })
            let tempresult = [];
            let temptime = 0;
            let tempdate = '';
            for (let index = 1; index < reNewResult.length; index++) {
                let unix_timestamp = reNewResult[index].timestamp;
                let TEMPanalysicDate = new Date(unix_timestamp)
                let year = TEMPanalysicDate.getFullYear().toString();
                let month = (TEMPanalysicDate.getMonth() + 1).toString().padStart(2, '0');
                let day = TEMPanalysicDate.getDate().toString().padStart(2, '0');
                tempdate = year + month + day;
                if (!tempresult || !tempresult[temptime]) {
                    tempresult[temptime] = {
                        date: tempdate,
                        number: 1
                    };
                } else if (tempresult[temptime].date == tempdate) {
                    tempresult[temptime].number++
                } else {
                    temptime++
                    tempresult[temptime] = {
                        date: tempdate,
                        number: 1
                    }

                }

            }
            return tempresult
        }
        //ç¾¤å‹çš„é ­å…­åçš„è¨Šæ¯æ•¸(ä¸åŒ…æ‹¬BOT) (æ£’å‹åœ–)
        function analysicPeopleTalk(messages) {
            var tempData = [];
            messages.forEach(message => {
                if (message.isbot == false)
                    if (!tempData[message.userName]) {
                        tempData[message.userName] = 1;
                    } else tempData[message.userName]++;
            })
            return tempData;
        }

        function analysicPeopleTalk2(messages) {
            var tempData2 = [];
            messages.forEach(message => {
                if (!tempData2[message.userName]) {
                    tempData2[message.userName] = 1;
                } else tempData2[message.userName]++;
            })
            return tempData2;
        }

        function analysicTotallymessage(messages) {
            let humanTimes = messages.filter(time => time.isbot == false) || [];
            let botTimes = messages.filter(time => time.isbot == true) || [];
            return [humanTimes.length, botTimes.length]
        }

        function totallyDay(result) {

            if (!result.length) return;
            let lastDay = result[result.length - 1].timestamp;
            let firstDay = result[0].timestamp;
            return dhm(lastDay - firstDay);
            //"[30/10/2019, 17:07:04]", "30", "10", "2019", "17", "07", "04"]
        }

        function dhm(t) {
            let cd = 24 * 60 * 60 * 1000,
                ch = 60 * 60 * 1000,
                d = Math.floor(t / cd),
                h = Math.floor((t - d * cd) / ch),
                m = Math.round((t - d * cd - h * ch) / 60000),
                pad = function (n) {
                    return n < 10 ? '0' + n : n;
                };
            if (m === 60) {
                h++;
                m = 0;
            }
            if (h === 24) {
                d++;
                h = 0;
            }
            return [d, 'å¤©', pad(h), 'å°æ™‚', pad(m), 'åˆ†é˜'].join('');
        }
    </script>
    <script>
        function dhm2(unix_timestamp) {
            var date = new Date(unix_timestamp)
            var year = date.getFullYear().toString();
            var month = (date.getMonth() + 1).toString().padStart(2, '0');
            var day = date.getDate().toString().padStart(2, '0');
            var dhm2hour = date.getHours();
            var dhm2minute = date.getMinutes();
            return [year, 'å¹´', month, 'æœˆ', day, 'æ—¥', ' ', dhm2hour, ':', dhm2minute].join('');
        };
        const appMain = new Vue({
            el: "#appMain",
            data: {
                filter: "",
                rows: rawData
            },
            methods: {
                reNewappMain(input) {
                    this.rows = input
                },

                highlightMatches(text, isbot) {
                    const matchExists = text
                        .toLowerCase()
                        .includes(this.filter.toLowerCase());
                    if (!matchExists) return text;
                    const re = new RegExp(this.filter, "ig");
                    if (isbot) text = text + '(ğŸ¤–)';
                    return text.replace(re, matchedText => `<strong>${matchedText}</strong>`);
                },
                dhm2(unix_timestamp) {
                    var dhm2date = new Date(unix_timestamp)
                    var year = dhm2date.getFullYear().toString();
                    var month = (dhm2date.getMonth() + 1).toString().padStart(2, '0');
                    var day = dhm2date.getDate().toString().padStart(2, '0');
                    var dhm2hour = dhm2date.getHours().toString().padStart(2, '0');
                    var dhm2minute = dhm2date.getMinutes().toString().padStart(2, '0');
                    return [year, 'å¹´', month, 'æœˆ', day, 'æ—¥', '\n', dhm2hour, ':', dhm2minute].join('');
                }
            },
            computed: {
                filteredRows() {
                    return this.rows.filter(row => {
                        const contact = row.contact.toString().toLowerCase();
                        const userName = row.userName.toString().toLowerCase();
                        const timestamp = dhm2(row.timestamp).toString().toLowerCase();
                        const searchTerm = this.filter.toLowerCase();
                        return (
                            contact.includes(searchTerm) || userName.includes(searchTerm) ||
                            timestamp.includes(searchTerm)
                        );
                    });
                }
            }
        });
    </script>
    <script>
        function drawWordCloud(newData) {
            //æ–‡å­—é›²/é—œéµå­—ï¼ŒåŠå­—å‹å¤§å°ï¼ˆé€™é‚Šåªæ”¾ä¸‰å€‹ï¼‰
            var fill = d3.scaleOrdinal(d3.schemeCategory10);
            //å–å¾—å‘ˆç¾è™•çš„å¯¬ã€é«˜
            var cloudw = parseInt(d3.select("#tag").style("width"), 10);
            var cloudH = parseInt(d3.select("#tag").style("height"), 10);
            var text = "";
            (newData || rawData).forEach(Data => {
                if (Data.isbot == false) {
                    text += Data.contact + ' ';
                }
            })
            var wordFreq = {};
            var resultJieba = call_jieba_cut(text, function (_result) {
                _result.forEach(function (s) {
                    wordFreq[s] ? wordFreq[s]++ : wordFreq[s] = 1;
                });

                var wordFreqNew = Object.keys(wordFreq).map((key) => {
                    return {
                        text: key,
                        freq: wordFreq[key]
                    }
                });

                var wordFreqNew2 = wordFreqNew.filter((key) => {
                    return (key.text.match(/^\S\S/) && !key.text.toString().match(/^\d+$/))
                });
                wordFreqNew2.sort(function (b, a) {
                    return a.freq - b.freq;
                });

                var wordFreqNew3 = wordFreqNew2.map((key, index) => {
                    return {
                        text: key.text,
                        size: (60 - index) > 1 ? (60 - index) : 1
                    }
                });

                d3.layout.cloud().size([cloudw, cloudH])
                    .words(wordFreqNew3)
                    .padding(2)
                    .rotate(function () {
                        return ~~((Math.random() * 6) - 3) * 30
                    })
                    .fontSize(function (d) {
                        return d.size;
                    })
                    .on("end", draw)
                    .start();
                document.getElementById("myNav").style.display = "none";
            });

            function draw(words) {
                d3.select("#tag").select("svg").remove();
                d3.select("#tag").append("svg")
                    .attr("width", cloudw)
                    .attr("height", cloudH)
                    .append("g")
                    .attr("transform", "translate(" + cloudw / 2 + "," + cloudH / 2 + ")")
                    .selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .transition()
                    .duration(800)
                    .style("font-size", function (d) {
                        return d.size + "px";
                    })
                    .style("font-family", "Microsoft JhengHei")
                    .style("cursor", 'pointer')
                    .style("fill", function (d, i) {
                        return fill(i);
                    })
                    .attr("text-anchor", "middle")
                    .attr("transform", function (d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .text(function (d) {
                        return d.text;
                    })

            }
        }
    </script>



    <script>
        var peopleTalk;
        drawTop6DataChart(rawData);

        function drawTop6DataChart(input) {
            peopleTalk = analysicPeopleTalk(input);
            var top6Labels = [],
                top6Data = [];
            Object.keys(peopleTalk).forEach((item, index) => {
                if (index < 6) {
                    top6Data[index] = item;
                    top6Labels[index] = peopleTalk[item];
                }
            })
            //peopleTalk
            Chart.defaults.global.defaultFontColor = 'white';
            Chart.defaults.global.defaultFontFamily = "'Arial', sans-serif";
            Chart.defaults.global.defaultFontSize = 16;
            Chart.defaults.global.defaultFontStyle = 'normal';
            var ctx = document.getElementById("myChart").getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: top6Data,
                    datasets: [{
                        label: 'è¨Šæ¯é‡æ’å',
                        data: top6Labels,
                        backgroundColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true,
                                precision: 0
                            }
                        }],
                        xAxes: [{
                            gridLines: {
                                offsetGridLines: true
                            }
                        }]
                    }
                }
            });
        }
    </script>

    <script>
        function drawAlluserChart(input) {
            var peopleTalk2 = analysicPeopleTalk2(input);
            var allUesr = [];
            Object.keys(peopleTalk2).forEach((item, index) => {
                allUesr[index] = {
                    Data: peopleTalk2[item],
                    Labels: item
                }
            })
            allUesr.sort(function (b, a) {
                return a.Data - b.Data;
            });
            var ctx2 = document.getElementById("myChart2").getContext('2d');
            var myChart2 = new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: allUesr.map((e) => {
                        return e.Labels;
                    }),
                    datasets: [{
                        label: 'èŠå¤©æ¯”ä¾‹',
                        data: allUesr.map((e) => {
                            return e.Data;
                        }),
                        backgroundColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],

                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: 'èŠå¤©æ¯”ä¾‹' + ' (å…±' + Object.keys(peopleTalk).length + 'äºº)',
                        fontColor: 'white',
                        fontStyle: 'normal'
                    },
                    legend: {
                        display: false
                    }
                }
            });
        }
    </script>
    <script>
        var chart3cfg;

        function drawallDateforChart3() {
            var dataCFG = [];

            allDateforChart3.forEach((e, i) => {
                var tempTime3 = e.date.toString().match(/^(\d\d\d\d)(\d\d)(\d\d)/)
                dataCFG[i] = {
                    t: toTimestamp(tempTime3[1], tempTime3[2], tempTime3[3]),
                    y: e.number
                }

            })
            dataCFG.sort(function (b, a) {
                return a.t - b.t;
            });

            function toTimestamp(year, month, day) {
                var datum = new Date(Date.UTC(year, month - 1, day, 0, 0, 0));
                return datum.getTime();
            }
            chart3cfg = {
                data: {
                    datasets: [{
                        label: 'æ¯æ—¥è¨Šæ¯æ•¸',
                        backgroundColor: 'rgba(255, 99, 132, 1)',
                        borderColor: 'rgba(255,99,132,1)',
                        data: dataCFG,
                        type: 'line',
                        pointRadius: 0,
                        fill: false,
                        lineTension: 0,
                        borderWidth: 2
                    }]
                },
                options: {
                    animation: {
                        duration: 0
                    },
                    scales: {
                        xAxes: [{
                            type: 'time',
                            distribution: 'series',
                            offset: true,
                            time: {
                                displayFormats: {
                                    quarter: 'MMM YYYY'
                                }
                            },
                            ticks: {
                                major: {
                                    enabled: true,
                                    fontStyle: 'bold'
                                },
                                source: 'data',
                                autoSkip: true,
                                autoSkipPadding: 75,
                                maxRotation: 0,
                                sampleSize: 100
                            },
                            afterBuildTicks: function (scale, ticks) {
                                if (!tick) {
                                    return;
                                }
                                var majorUnit = scale._majorUnit;
                                var firstTick = ticks[0];
                                var curri, ilen, val, tick, currMajor, lastMajor;

                                val = moment(ticks[0].value);
                                if ((majorUnit === 'minute' && val.second() === 0) ||
                                    (majorUnit === 'hour' && val.minute() === 0) ||
                                    (majorUnit === 'day' && val.hour() === 9) ||
                                    (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() ===
                                        1) ||
                                    (majorUnit === 'year' && val.month() === 0)) {
                                    firstTick.major = true;
                                } else {
                                    firstTick.major = false;
                                }
                                lastMajor = val.get(majorUnit);

                                for (curri = 1, ilen = ticks.length; curri < ilen; curri++) {
                                    tick = ticks[curri];
                                    val = moment(tick.value);
                                    currMajor = val.get(majorUnit);
                                    tick.major = currMajor !== lastMajor;
                                    lastMajor = currMajor;
                                }
                                return ticks;
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                drawBorder: false
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'è¨Šæ¯é‡'
                            },
                            ticks: {
                                beginAtZero: true,
                                precision: 0
                            }
                        }]
                    },
                    tooltips: {
                        intersect: false,
                        mode: 'index',
                        callbacks: {
                            label: function (tooltipItem, myData) {
                                var label = myData.datasets[tooltipItem.datasetIndex].label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += parseFloat(tooltipItem.value)
                                return label;
                            }
                        }
                    }
                }
            };
            var ctx3 = document.getElementById("myChart3").getContext('2d');
            var myChart3 = new Chart(ctx3, chart3cfg);
        }
        //// [{t:1602677527,y:600},{t:1622677527,y:300},{t:1702677527,y:900}],
    </script>
    <script>
        var hde = document.documentElement,
            b = document.body,
            st = 'scrollTop',
            sh = 'scrollHeight';
        var progressbar = document.getElementById("progressbar");
        var pos = ((hde[sh] || b[sh]) <= hde.clientHeight) ? 100 : getVerticalScrollPercentage(b);
        progressbar.innerHTML = Math.round(pos) + '%';
        progressbar.style.width = Math.max(Math.round(pos), 10) + '%';
        document.getElementById("touchBar").addEventListener("mousedown",
            function clicked(e) {
                var br = document.getElementById("touchBar").getBoundingClientRect();
                // x & y are relative to the clicked element
                var x = e.clientX - br.left;
                var level = Math.round(x / document.getElementById("touchBar").offsetWidth * 100) / 100;

                window.scrollTo({
                    top: level * ((hde[sh] || b[sh]) - hde.clientHeight),
                    behavior: 'smooth'
                });

            });

        document.onscroll = function () {
            pos = getVerticalScrollPercentage(b)
            //aria-valuenow
            progressbar.innerHTML = Math.round(pos) + '%';
            progressbar.style.width = Math.max(Math.round(pos), 10) + '%';
        };

        function getVerticalScrollPercentage(elm) {
            var percent = (hde[st] || b[st]) / ((hde[sh] || b[sh]) - hde.clientHeight) * 100;
            return percent
        }
    </script>

    <script>
        $(document).ready(function () {
            var activeSystemClass = $('.list-group-item.active');

            //something is entered in search form
            $('#system-search').keyup(function () {
                var that = this;
                // affect all table rows on in systems table
                var tableBody = $('.table-list-search tbody');
                var tableRowsClass = $('.table-list-search tbody tr');
                $('.search-sf').remove();
                tableRowsClass.each(function (i, val) {

                    //Lower text for case insensitive
                    var rowText = $(val).text().toLowerCase();
                    var inputText = $(that).val().toLowerCase();
                    if (inputText != '') {
                        $('.search-query-sf').remove();
                        tableBody.prepend(
                            '<tr class="search-query-sf"><td colspan="6"><strong>Searching for: "' +
                            $(that).val() +
                            '"</strong></td></tr>');
                    } else {
                        $('.search-query-sf').remove();
                    }

                    if (rowText.indexOf(inputText) == -1) {
                        //hide rows
                        tableRowsClass.eq(i).hide();

                    } else {
                        $('.search-sf').remove();
                        tableRowsClass.eq(i).show();
                    }
                });
                //all tr elements are hidden
                if (tableRowsClass.children(':visible').length == 0) {
                    tableBody.append(
                        '<tr class="search-sf"><td class="text-muted" colspan="6">No entries found.</td></tr>'
                    );
                }
            });
        });
    </script>

</body>
<!-- HKTRPG Sad -- 20201015-->

</html>